{"version":3,"sources":["./src/app/ui-pc/publish/modify/modify.component.html","./src/app/ui-pc/publish/modify/modify.component.scss","./src/app/ui-pc/publish/modify/modify.component.ts","./src/app/ui-pc/publish/publish.module.ts","./src/app/ui-pc/publish/publish/publish.component.html","./src/app/ui-pc/publish/publish/publish.component.scss","./src/app/ui-pc/publish/publish/publish.component.ts"],"names":[],"mappings":"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","file":"publish.module.chunk.js","sourcesContent":["module.exports = \"<form name=\\\"form\\\" (ngSubmit)=\\\"updata_act()\\\" #f=\\\"ngForm\\\" novalidate>\\r\\n        <div class=\\\"form-row\\\">    \\r\\n                <div class=\\\"col-md-4\\\">\\r\\n                    <div class=\\\"col\\\">\\r\\n            <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !title.valid }\\\">\\r\\n                    <label for=\\\"title\\\">活动标题</label>\\r\\n                    <input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"title\\\" [(ngModel)]=\\\"model.Title\\\" placeholder={{act?.Title}} #title=\\\"ngModel\\\" required />\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"col\\\"> \\r\\n        <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !starttime.valid }\\\">\\r\\n            <label for=\\\"starttime\\\">开始时间</label>\\r\\n            <input type=\\\"date\\\" class=\\\"form-control\\\" name=\\\"starttime\\\" [(ngModel)]=\\\"model.Start\\\" placeholder={{act?.Start}} #starttime=\\\"ngModel\\\" required />\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"col\\\"> \\r\\n        <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !endtime.valid }\\\">\\r\\n            <label for=\\\"endtime\\\">结束时间</label>\\r\\n            <input type=\\\"date\\\" class=\\\"form-control\\\" name=\\\"endtime\\\" [(ngModel)]=\\\"model.End\\\" placeholder={{act?.End}} #endtime=\\\"ngModel\\\" required />\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n   \\r\\n    <div class=\\\"col-md-4\\\">\\r\\n        <label>上传缩略图</label>\\r\\n        <div class=\\\"image\\\" >\\r\\n            <img [src]=\\\"act?.Picture\\\" src=\\\"\\\" onerror=\\\"this.src=''\\\" height=\\\"180\\\">\\r\\n        </div>\\r\\n        <div class=\\\"image\\\" >\\r\\n            <label class=\\\"btn btn-primary\\\" for=\\\"xFile\\\">选择图片</label>\\r\\n            <form><input type=\\\"file\\\" accept=\\\".jpg,.png\\\" id=\\\"xFile\\\" style=\\\"position:absolute;clip:rect(0 0 0 0);\\\" (change)=\\\"selectedFileOnChanged($event)\\\"> </form>\\r\\n        </div>\\r\\n        <div class=\\\"image\\\" >\\r\\n            <img [src]=\\\"imageurl\\\" src=\\\"\\\" onerror=\\\"this.src=''\\\" height=\\\"180\\\">\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"col-md-12\\\"></div>\\r\\n\\r\\n    <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"form-group\\\" >\\r\\n            <label for=\\\"detail\\\">活动介绍</label>\\r\\n            <textarea class=\\\"form-control detail\\\" name=\\\"detail\\\" placeholder={{act?.Detail}} [(ngModel)]=\\\"model.Detail\\\" ></textarea>\\r\\n        </div>\\r\\n        <div class=\\\"form-group\\\">\\r\\n            <button [disabled]=\\\"loading\\\" class=\\\"btn btn-primary\\\">修改</button>\\r\\n            <input type = \\\"button\\\" class=\\\"btn btn-primary\\\" value = \\\"预览\\\" (click)=\\\"preview()\\\">\\r\\n        </div>\\r\\n        </div>\\r\\n        </div>\\r\\n</form>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/ui-pc/publish/modify/modify.component.html\n// module id = ./src/app/ui-pc/publish/modify/modify.component.html\n// module chunks = publish.module","module.exports = \".btn-primary {\\n  color: #fff;\\n  background-color: #6f5499;\\n  border-color: #6f5499; }\\n\\n.detail {\\n  width: max;\\n  height: 200px;\\n  resize: none; }\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/ui-pc/publish/modify/modify.component.scss\n// module id = ./src/app/ui-pc/publish/modify/modify.component.scss\n// module chunks = publish.module","import { Component, OnInit, ElementRef } from '@angular/core';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {Activity} from '../../../date/table-data';\r\nimport {UserService} from '../../../services/activity/PcActivity.service';\r\nimport { NgModule} from '@angular/core';\r\nimport { PublishService} from '../../../services/activity/PcActivity.service'\r\nimport { ToastsManager } from 'ng2-toastr/ng2-toastr';\r\n\r\n@Component({\r\n    selector: 'app-modify',\r\n    templateUrl: './modify.component.html',\r\n    styleUrls: ['./modify.component.scss'],\r\n    providers: [UserService]\r\n})\r\n@NgModule({})\r\nexport class ModifyComponent implements OnInit {\r\n    constructor(\r\n        private publish:PublishService,\r\n        private router: Router,\r\n        private actservice:UserService, \r\n        private activatedRoute:ActivatedRoute,\r\n    ){}\r\n    model: any = {};\r\n    act: Activity ;\r\n    id:number\r\n    imageurl:string=\"\";\r\n    imageUrl =\"http://localhost:80/api/uploaded/\";\r\n    image:string;\r\n    updatetime:string=new Date().toLocaleDateString().replace('/',\"-\").replace('/',\"-\");\r\n    Preview :number=0;\r\n    ngOnInit() {\r\n        this.activatedRoute.queryParams.subscribe(queryParams => {\r\n          this.model.Actid = +queryParams.Actid;\r\n    })\r\n    this.actservice.Getactdetail(this.model.Actid).subscribe(\r\n        ret=>{\r\n            this.act = ret.json();\r\n            this.model.Title=this.act.Title;\r\n            this.model.Title=this.act.Title;\r\n            this.model.Start=this.act.Start;\r\n            this.model.End=this.act.End;\r\n            this.model.Detail=this.act.Detail;\r\n        }\r\n    )\r\n    }\r\nselectedFileOnChanged(event:any) {\r\n        \r\n    if(event.target.files.length<0) {\r\n      return\r\n      }\r\n      let files = event.target.files[0];\r\n      let formData = new FormData();\r\n      formData.append('image',files,files.name);\r\n      this.publish.imgFa(formData).subscribe(\r\n        fb=>{\r\n          const ret1=fb.json();\r\n          this.imageurl=this.imageUrl+ret1.ImageUrl;\r\n          console.log(this.imageurl);\r\n        }\r\n      );\r\n      event.target.value = null;\r\n    }\r\n    preview()\r\n    {\r\n        this.Preview=1;\r\n        this.act.Actid=this.model.Actid;\r\n        this.act.Title=this.model.Title;\r\n        this.act.Start=this.model.Start;\r\n        this.act.End=this.model.End;\r\n        this.act.Detail=this.model.Detail;\r\n        this.act.UpdateTime=this.updatetime;\r\n        this.act.Picture=this.imageurl;\r\n        this.router.navigate(['pchome/mainhome/pclist/detail'],{queryParams:{'preview':this.Preview}});\r\n        sessionStorage.setItem('act', JSON.stringify(this.act));\r\n        console.log(this.model.Title)\r\n    }\r\n    updata_act(){\r\n        this.actservice.change(this.model.Actid,this.model.Title,this.model.Start,this.model.End,this.model.Detail,this.imageurl,this.updatetime)\r\n        .subscribe(\r\n            data => {\r\n                alert('修改成功')\r\n                this.router.navigate(['pchome/mainhome/pclist/home'])\r\n            },\r\n            error => {\r\n                console.log(JSON.stringify(error.json()));\r\n                alert('修改失败')\r\n            }\r\n        );\r\n        }\r\n    }\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/ui-pc/publish/modify/modify.component.ts","import { CommonModule} from '@angular/common';\r\nimport { NgModule} from '@angular/core';\r\nimport {RouterModule, Routes} from '@angular/router';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { pcpublishComponent}from'./publish/publish.component';\r\nimport { PublishService,UserService }from '../../services/activity/PcActivity.service';\r\nimport { HttpModule } from '@angular/http';\r\nimport { HttpClientModule, HttpClient } from '@angular/common/http'\r\nimport { ModifyComponent } from './modify/modify.component';\r\n\r\nconst PublishRoutes: Routes = [\r\n{\r\n  path: '',\r\n  redirectTo:'pcpublish',\r\n  // 路由守卫\r\n  // canActivate: [AuthGuard]\r\n},\r\n{\r\n    path:'pcpublish',\r\n    component:pcpublishComponent,\r\n    // canActivate: [AuthGuard]\r\n},\r\n{\r\n  path:'modify',\r\n  component:ModifyComponent,\r\n  // canActivate: [AuthGuard]\r\n}\r\n];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    pcpublishComponent,\r\n    ModifyComponent\r\n  ],\r\n  imports:  [\r\n    CommonModule,\r\n    FormsModule,\r\n    HttpModule,\r\n    HttpClientModule,\r\n    RouterModule.forChild(PublishRoutes),\r\n  ],\r\n  exports: [],\r\n  providers: [PublishService,HttpClientModule,UserService]\r\n})\r\nexport class PublishModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/ui-pc/publish/publish.module.ts","module.exports = \"\\r\\n<div class=\\\"form-row\\\">    \\r\\n    <div class=\\\"col-md-4\\\">\\r\\n        <div class=\\\"col\\\">\\r\\n            <label>活动标题</label>\\r\\n            <input type=\\\"data\\\" class=\\\"form-control\\\" id=\\\"title\\\" [(ngModel)]=\\\"title\\\" #title1=\\\"ngModel\\\" placeholder=\\\"输入活动标题\\\" required>\\r\\n            <div [hidden]=\\\"title1.valid || title1.pristine\\\" class=\\\"alert alert-danger\\\" style=\\\" \\\">\\r\\n            <div *ngIf=\\\"title1.errors?.required\\\">\\r\\n               活动标题不能为空！</div>\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"col\\\"> \\r\\n            <label>开始时间</label>\\r\\n            <input type=\\\"date\\\" class=\\\"form-control\\\" id=\\\"starttime\\\" [(ngModel)]=\\\"starttime\\\" #starttime1=\\\"ngModel\\\" placeholder=\\\"\\\" required>\\r\\n            <div [hidden]=\\\"starttime1.valid || starttime1.pristine\\\" class=\\\"alert alert-danger\\\" style=\\\" \\\">\\r\\n                <div *ngIf=\\\"starttime1.errors?.required\\\">  \\r\\n                   开始时间不能为空！</div>\\r\\n              </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"col\\\">\\r\\n            <label>结束时间</label>\\r\\n            <input type=\\\"date\\\" class=\\\"form-control\\\" id=\\\"endtime\\\" [(ngModel)]=\\\"endtime\\\" #endtime1=\\\"ngModel\\\" placeholder=\\\"\\\" required>\\r\\n            <div [hidden]=\\\"endtime1.valid || endtime1.pristine\\\" class=\\\"alert alert-danger\\\" style=\\\" \\\">\\r\\n                <div *ngIf=\\\"endtime1.errors?.required\\\">\\r\\n                   结束时间不能为空！</div>\\r\\n              </div>\\r\\n        </div>\\r\\n    </div>\\r\\n   \\r\\n    <div class=\\\"col-md-4\\\">\\r\\n            <label>上传缩略图</label>\\r\\n            <div class=\\\"file\\\">选择文件\\r\\n                <!-- <input type=\\\"file\\\" name=\\\"inputfile\\\" (change)=\\\"selectedFileOnChanged($event)\\\" /> -->\\r\\n                <input type=\\\"file\\\" accept=\\\".jpg,.png\\\" name=\\\"image\\\" (change)=\\\"selectedFileOnChanged($event)\\\"> \\r\\n\\r\\n            </div>\\r\\n            <div>\\r\\n                 <!-- <img src=\\\"\\\" height=\\\"200\\\" alt=\\\"loading\\\"> -->\\r\\n                 <img [src]=\\\"imageurl\\\" onerror=\\\"this.src='http://localhost:80/api/uploaded/loading.jpg'\\\" height=\\\"180\\\">\\r\\n                 <!-- {{this.imageurl}} -->\\r\\n            </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"col-md-12\\\"></div>\\r\\n\\r\\n    <div class=\\\"col-md-12\\\">\\r\\n        <label>活动介绍</label>\\r\\n            <div>\\r\\n               <textarea class=\\\"form-control introduction\\\" [(ngModel)]=\\\"introduction\\\" placeholder=\\\"输入活动详情\\\">    \\r\\n               </textarea>\\r\\n            </div>\\r\\n\\r\\n\\r\\n\\r\\n    <div>\\r\\n        <div id=\\\"main\\\">\\r\\n            <!-- <button type=\\\"button\\\"class=\\\"btn btn-lg btn-primary\\\" (click)=\\\"back()\\\">上一步</button> -->\\r\\n            <button type=\\\"button\\\"class=\\\"btn btn-lg btn-primary\\\" (click)=\\\"next()\\\">确认</button>\\r\\n            <!-- <button type=\\\"button\\\"(click)=\\\"upload()\\\">上传</button> -->\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n</div>\\r\\n<!-- <img class=\\\"featurette-image img-fluid mx-auto\\\" data-src=\\\"holder.js/500x500/auto\\\" alt=\\\"250x250\\\" style=\\\"width: 250px; height: 250px;\\\" ng-src=\\\"img\\\" src=\\\"\\\" onerror=\\\"this.src='https://angular.cn/assets/images/logos/angular/angular.svg'\\\" data-holder-rendered=\\\"true\\\"> -->\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/ui-pc/publish/publish/publish.component.html\n// module id = ./src/app/ui-pc/publish/publish/publish.component.html\n// module chunks = publish.module","module.exports = \"button {\\n  text-align: center;\\n  background-color: #6f5499; }\\n\\n.file {\\n  position: relative;\\n  display: inline-block;\\n  background: #6f5499;\\n  border: 1px solid #6f5499;\\n  border-radius: 4px;\\n  padding: 4px 12px;\\n  overflow: hidden;\\n  color: #fff;\\n  text-decoration: none;\\n  text-indent: 0;\\n  line-height: 30px; }\\n\\n.file input {\\n  position: absolute;\\n  font-size: 100px;\\n  right: 0;\\n  top: 0;\\n  opacity: 0; }\\n\\n.file:hover {\\n  background: #6f5499;\\n  border-color: #6f5499;\\n  color: #fff;\\n  text-decoration: none; }\\n\\ninput {\\n  border: 1px solid #6f5499;\\n  padding: 7px 0px;\\n  border-radius: 3px;\\n  padding-left: 5px;\\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\\n  -webkit-transition: border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;\\n  transition: border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;\\n  transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;\\n  transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s,-webkit-box-shadow ease-in-out .15s; }\\n\\ninput:focus {\\n  border-color: #6f5499;\\n  outline: 0;\\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px #6f5499;\\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px #6f5499; }\\n\\n.introduction {\\n  width: max;\\n  height: 200px;\\n  resize: none; }\\n\\n#main {\\n  width: 400px;\\n  height: 350px;\\n  margin: 0 auto; }\\n\\n.btn-primary:hover {\\n  color: #fff;\\n  background-color: #6f5499;\\n  border-color: #6f5499; }\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/ui-pc/publish/publish/publish.component.scss\n// module id = ./src/app/ui-pc/publish/publish/publish.component.scss\n// module chunks = publish.module","import {Component, OnInit, ElementRef} from \"@angular/core\";\r\nimport { PublishService} from '../../../services/activity/PcActivity.service'\r\nimport { Injectable,ViewContainerRef } from '@angular/core';\r\nimport {Headers, Http} from \"@angular/http\";\r\nimport {Activity} from '../../../date/table-data';\r\nimport { Observer } from \"rxjs/Observer\";\r\nimport {Router} from '@angular/router';\r\nimport { ToastsManager } from 'ng2-toastr/ng2-toastr';\r\n\r\n@Component({\r\n  selector: 'publish',\r\n  templateUrl: './publish.component.html',\r\n  styleUrls: ['./publish.component.scss']\r\n})\r\n\r\nexport class pcpublishComponent implements  OnInit {\r\n\r\n    constructor(private publish:PublishService, private router:Router,public toastr: ToastsManager,vcr: ViewContainerRef) {\r\n      this.toastr.setRootViewContainerRef(vcr);\r\n    }\r\n\r\n    title: string;\r\n    starttime: string;\r\n    endtime: string;\r\n    image:string;\r\n    introduction:string;\r\n    status:string=\"1\";\r\n    picture:string='1';\r\n    remrk:string='2';\r\n    total:string='99';\r\n    imageurl:string=\"http://localhost:80/api/uploaded/loading.jpg\";//往后端传地址的url\r\n\r\n    img:string;\r\n\r\n    publisher:string=sessionStorage.getItem('admin');\r\n    file:File;\r\n    updatetime:string=new Date().toLocaleDateString().replace('/',\"-\").replace('/',\"-\");\r\n    imageUrl =\"http://localhost:80/api/uploaded/\";//前端ng-src获取页面的url\r\n\r\n    ngOnInit() {  }\r\n    selectedFileOnChanged(event:any) {\r\n    //     // 这里是文件选择完成后的操作处理\r\n    //      this.readThis(event.target);\r\n    //       var preview = document.querySelector('img');\r\n    //      var uploadsFile  = <HTMLInputElement>document.querySelector('input[type=file]');//HTMLElement没有files方法。于是在es6里找了下有files属性的类型，是HTMLInputElement类型。于是就强制它转换成这个类型。\r\n    //      var file = uploadsFile.files[0];//改成了先转换类型再调用属性\r\n    //      var url,name;\r\n    //      const reader: FileReader = new FileReader();\r\n    //         // 设置文件读取完毕事件\r\n    //         reader.onload = (event: ProgressEvent) => {\r\n    //             const url = reader.result; // 获取url\r\n    //             const name = file.name; // 获取文件名字\r\n    //         };\r\n    //     reader.addEventListener(\"load\", function () {\r\n    //       preview.src = reader.result;\r\n    //     }, false);\r\n    // // // 设置文件读取完毕事件\r\n    if(event.target.files.length<0) {//判断属性里有无文件\r\n      return\r\n      }\r\n      let files = event.target.files[0];//获取文件的各个参数\r\n      let formData = new FormData();//创建一个formdata的空对象\r\n      formData.append('image',files,files.name);//给这对象加键值,append(name, value, filename);name: 字段名称,value: 字段数值,filename: 文件的文件名(可选).\r\n      this.publish.imgFa(formData).subscribe(//后端通过json传入图片url，并返回url地址\r\n        fb=>{\r\n          const ret1=fb.json();\r\n          this.imageurl=this.imageUrl+ret1.ImageUrl;\r\n          console.log(this.imageurl);\r\n        }\r\n      );\r\n      event.target.value = null;//把目标DOM元素化为空\r\n\r\n//     if(file){\r\n//         reader.readAsDataURL(file); // 获取图片的data: URL\r\n//     }\r\n// }\r\n\r\n// readThis(inputValue: any): void {//image读取base64\r\n//     var file:File = inputValue.files[0];\r\n//     var myReader:FileReader = new FileReader();\r\n\r\n//     myReader.onloadend = (e) => {\r\n//       this.image = myReader.result;\r\n//       this.image.toString().replace(\"data:image/jpeg;base64,\",\"\")\r\n//     }\r\n//     myReader.readAsDataURL(file);\r\n  }\r\n\r\n  back() {\r\n\r\n  }\r\n  next() {\r\n        if(this.title==null||this.starttime==null||this.endtime==null||this.introduction==null)\r\n        {\r\n          this.toastr.error('请完成活动标题、开始时间、结束时间、活动介绍的输入', '温馨提示')\r\n          err =>{\r\n            console.log(err)\r\n          }\r\n        }\r\n        // else if(this.starttime<this.updatetime)\r\n        // {\r\n        //   this.toastr.error('活动添加失败 原因：活动开始时间过早', '温馨提示')\r\n        //   err =>{\r\n        //     console.log(err)\r\n        //   }\r\n        // }\r\n        else if(this.starttime>this.endtime)\r\n        {\r\n          this.toastr.error('活动添加失败 原因：活动开始时间或活动结束时间存在问题', '温馨提示')\r\n          err =>{\r\n            console.log(err)\r\n          }\r\n        }\r\n        else\r\n        {\r\n        this.publish.publish(this.title,this.starttime,this.endtime,this.introduction,this.imageurl,this.status,this.updatetime,this.publisher).subscribe(\r\n        fb=>{  // 反馈信息\r\n        const ret = fb.json();\r\n        console.log(ret);\r\n        if(ret.ok)\r\n        {\r\n          this.toastr.success('活动添加成功', '温馨提示')\r\n          this.router.navigate(['pchome/mainhome/pclist/home'])\r\n        }\r\n      },\r\n      err =>{  // 错误信息\r\n        this.toastr.error('活动添加失败 原因：未连接上服务器', '温馨提示')\r\n        console.log(err);\r\n      }\r\n    )\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/ui-pc/publish/publish/publish.component.ts"],"sourceRoot":"webpack:///"}